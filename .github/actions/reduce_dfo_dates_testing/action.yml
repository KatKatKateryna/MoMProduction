name: Process only 1 date for DFO
description: Reduce processing time

runs:
  using: "composite"
  steps:
    - name: Reduce processing time, stop before MoM_update
      shell: bash
      run: |
        python <<'EOF'
        import os
        file_path = os.path.join(".", "DFO_tool.py")

        # Text replacements
        replacements = {
            "for key in datelist:": "for key in dict([next(iter(datelist.items()))]):",
            "dataurl,": "'--quota=50m', dataurl,",
            "update_DFO_MoM(datelist[key])": "import sys; sys.exit()"
        }

        # Read file
        with open(file_path, "r", encoding="utf-8") as f:
            content = f.read()

        for old, new in replacements.items():
            content = content.replace(old, new)

        # Write file
        with open(file_path, "w", encoding="utf-8") as f:
            f.write(content)
        EOF